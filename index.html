<!DOCTYPE html>
<html>
<head>
  <title>Geoportal Interactivo</title>
  <meta charset="utf-8" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    #map { height: 100vh; }
  </style>
</head>
<body>
  <div id="map"></div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    // Crear el mapa
    var map = L.map('map').setView([-1.5, -78.5], 7); // Ajusta según tu zona

    // Fondo base (OSM)
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '© OpenStreetMap contributors'
    }).addTo(map);

    // Añadir capas WMS de GeoServer
    var geoserverUrl = 'http://localhost:8080/geoserver/wms'; // Cambia a tu IP/puerto

    var AOI = L.tileLayer.wms(geoserverUrl, {
      layers: 'workspace:AOI',
      format: 'image/png',
      transparent: true,
      attribution: 'AOI'
    }).addTo(map);

    var NDVI_2020 = L.tileLayer.wms(geoserverUrl, {
      layers: 'workspace:NDVI_2020_02',
      format: 'image/png',
      transparent: true,
      attribution: 'NDVI 2020'
    });

    var NDVI_2024 = L.tileLayer.wms(geoserverUrl, {
      layers: 'workspace:NDVI_2024_08',
      format: 'image/png',
      transparent: true,
      attribution: 'NDVI 2024'
    });

    var Sector = L.tileLayer.wms(geoserverUrl, {
      layers: 'workspace:Sector',
      format: 'image/png',
      transparent: true,
      attribution: 'Sector'
    });

    // Control de capas
    var baseMaps = {
      "OpenStreetMap": L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png')
    };

    var overlayMaps = {
      "AOI": AOI,
      "NDVI 2020": NDVI_2020,
      "NDVI 2024": NDVI_2024,
      "Sector": Sector
    };

    L.control.layers(baseMaps, overlayMaps).addTo(map);
  </script>
</body>
</html>
